@{
    ViewBag.Title = "Lịch Sử";
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.DiaChi = 2;
}

@using QuanLyKhachSan.Models.ViewModels
@model List<LichSuView>

<h3>Lịch Sử Đặt phòng</h3>

<div class="wrap-lich-su">
    @Html.Partial("_MenuTraiCaNhan")
    @if (@Model.Count > 0)
    {
        foreach (LichSuView lsv in @Model)
        {
            <div class="khung-lich-su">
                <table class="bang-dang-ky-thanh-cong bang-dat-phong-thanh-cong">
                    <colgroup>
                        <col style="width: 40%" />
                        <col style="width: 60%" />
                    </colgroup>
                    <tbody>
                        <tr><th>Tên Phòng:</th><th><span style="color: #8A2BE2">@lsv.TenPhong</span></th></tr>
                        <tr><th>Đặt Vào Ngày:</th><th><span style="color: #4682B4">@lsv.NgayDat</span></th></tr>
                        <tr><th>Ở Từ Ngày:</th><th><span style="color: #669900">@lsv.NgayDen</span></th></tr>
                        <tr><th>Đến Ngày:</th><th><span style="color: #008000">@lsv.NgayTra</span></th></tr>
                        <tr><th>Dịch Vụ:</th><th><span style="color: #009999">@lsv.DichVu</span></th></tr>
                        <tr><th>Thành Tiền:</th><th><span style="color: #e6004c">@lsv.ThanhTien.000 đ/ngày</span></th></tr>
                    </tbody>
                </table>
                @if (lsv.CoTheHuy)
                {
                    <button class="btn btn-danger" type="submit" data-toggle="modal" data-target="#myModal" onclick="myFunction('/CaNhan/XoaDatPhong/@lsv.MaDatPhong')">Hủy Đặt</button>
                }
                else
                {
                    <button class="btn btn-danger" disabled>Quá Hạn Hủy</button>
                }
            </div>
            <br />
        }
    }
    else
    {
        <div class="khung-lich-su">
            <label>Bạn Chưa Đặt Phòng Nào!</label>
        </div>
    }
</div>

<script src="/Scripts/jquery.min.js"></script>
<script src="/Scripts/bootstrap.min.js"></script>
<script>
    var link;
    function myFunction(s) {
        link = s;
    }
    function btnOKClick() {
        window.location = link;
    }
</script>

<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Thông Báo</h4>
            </div>
            <div class="modal-body">
                <p>Bạn có chắc chắn muốn hủy đặt không?</p>
            </div>
            <div class="modal-footer">
                <input type="button" style="width:70px" class="btn btn-success" data-dismiss="modal" value="Có" id="btnOK" onclick="btnOKClick()" />
                <input type="button" style="width:70px" class="btn btn-default" data-dismiss="modal" value="Không" />
            </div>
        </div>
    </div>
</div>

